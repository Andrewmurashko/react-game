(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{66:function(e,t,c){},79:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c.n(s),n=c(27),o=c.n(n),r=(c(66),c(5)),i=c(7),l=c(8),u=c(31),j=c.p+"static/media/click.b94c632a.mp3",m=c(14),d=c(1);var b=function(e){var t=e.history,c=Object(u.a)(j),n=Object(r.a)(c,1)[0],o=a.a.useState(!1),i=Object(r.a)(o,2),b=i[0],h=i[1],O=0;Object(m.a)("ArrowDown",(function(e){console.log("ArrowDown action ".concat(O)),O>=5&&(document.querySelector(".menu__".concat(O-1)).classList.remove("selected"),O=0),document.querySelector(".menu__".concat(O)).classList.add("selected"),O>0&&document.querySelector(".menu__".concat(O-1)).classList.remove("selected"),O+=1})),Object(m.a)("ArrowUp",(function(e){console.log("ArrowUp action"),(O-=1)<0&&(document.querySelector(".menu__".concat(O+1)).classList.remove("selected"),O=p.length-1),document.querySelector(".menu__".concat(O)).classList.add("selected"),p.length-1>O>0&&document.querySelector(".menu__".concat(O+1)).classList.remove("selected")})),Object(m.a)("Enter",(function(){console.log("Some action"),document.querySelector(".selected")&&(n(),p.some((function(e,c){if(e.name===document.querySelector(".selected").innerHTML)return h(!0),setTimeout((function(){return t.push("".concat(e.url))}),1e3);console.log("fuck")})))}));var p=[{name:"Continue",url:"/Game",componentName:"Game"},{name:"New game",url:"/Game",componentName:"Game"},{name:"Settings",url:"/Settings",componentName:"Settings"},{name:"Tutorial",url:"/Tutorial",componentName:"Tutorial"},{name:"Records",url:"/Records",componentName:"Records"}],f=Object(s.useRef)();Object(s.useEffect)((function(){b||l.a.from([f.current],{y:"800px",duration:1}),b&&(l.a.to([f.current],{y:"800px",duration:1}),console.log(b))}),[b]);var g=function(e){"New game"===e.name?(n(),localStorage.removeItem("savedGame"),localStorage.removeItem("gameStatAllSteps"),localStorage.removeItem("gameStatCurrStep"),h(!0),setTimeout((function(){t.push("".concat(e.url))}),1e3)):(h(!0),n(),setTimeout((function(){t.push("".concat(e.url))}),1e3))};return Object(d.jsx)("div",{className:"menu",ref:f,children:p.map((function(e,t){return Object(d.jsx)("div",{className:"menu__item menu__".concat(t," menu__").concat(e.name),onClick:function(){return g(e)},children:e.name},"".concat(e.name,"_").concat(t))}))})},h=c(35),O=c(45),p=c(88),f=new O,g=new p.a({board:f.board()});var v=[""],x=JSON.parse(localStorage.getItem("gameStatCurrStep"))||[],_=JSON.parse(localStorage.getItem("gameStatAllSteps"))||0;function S(e,t,c){v={from:e,to:t},c&&(v.promotion=c),f.move(v)&&(N(),x.push({from:e,to:t}),_+=1,localStorage.setItem("gameStatAllSteps",JSON.stringify(_)),localStorage.setItem("gameStatCurrStep",JSON.stringify(x)))}function N(e){var t=f.game_over(),c={board:f.board(),pendingPromotion:e,isGameOver:t,turn:f.turn(),result:t?k():null};localStorage.setItem("savedGame",f.fen()),g.next(c)}function k(){if(f.in_checkmate()){var e="w"===f.turn()?"BLACK":"WHITE";return"WINNER - ".concat(e)}if(f.in_draw()){var t="50 - MOVES - RULE";return f.in_stalemate()?t="STALEMATE":f.in_threefold_repetition()?t="REPETITION":f.insufficient_material()&&(t="INSUFFICIENT MATERIAL"),"DRAW - ".concat(t)}return"UNKNOWN REASON"}var y=g;var E=function(e){var t=e.children,c=e.black?"square-black":"square-white";return Object(d.jsx)("div",{className:"".concat(c," board-square"),children:t})},T=c(90),R=c(86);var C=function(e){var t=e.piece,c=t.type,s=t.color,a=e.position,n=Object(T.a)({item:{type:"piece",id:"".concat(a,"_").concat(c,"_").concat(s)},collect:function(e){return{isDragging:!!e.isDragging()}}}),o=Object(r.a)(n,3),i=o[0].isDragging,l=o[1],u=o[2],j="./assets/".concat(c,"_").concat(s,".png");return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(R.a,{connect:u,src:j}),Object(d.jsx)("div",{className:"piece-container",ref:l,style:{opacity:i?0:1},children:Object(d.jsx)("img",{src:j,alt:"".concat(c,"_").concat(s),className:"piece"})})]})},I=c(89),A=["r","n","b","q"];var w=function(e){var t=e.promotion,c=t.from,s=t.to,a=t.color;return Object(d.jsx)("div",{className:"board",children:A.map((function(e,t){return Object(d.jsx)("div",{className:"promote-square",children:Object(d.jsx)(E,{black:t%3===0,children:Object(d.jsx)("div",{className:"piece-container",onClick:function(){return S(c,s,e)},children:Object(d.jsx)("img",{src:"./assets/".concat(e,"_").concat(a,".png"),alt:"",className:"piece cursor-pointer"})})})},t)}))})};var G=function(e){var t=e.piece,c=e.black,s=e.position,n=a.a.useState(null),o=Object(r.a)(n,2),i=o[0],l=o[1],u=Object(I.a)({accept:"piece",drop:function(e){var t=e.id.split("_");!function(e,t){var c=f.moves({verbose:!0}).filter((function(e){return e.promotion}));c.some((function(c){return"".concat(c.from,":").concat(c.to)==="".concat(e,":").concat(t)}))&&N({from:e,to:t,color:c[0].color}),g.getValue().pendingPromotion||S(e,t)}(Object(r.a)(t,1)[0],s)}}),j=Object(r.a)(u,2)[1];return a.a.useEffect((function(){var e=y.subscribe((function(e){var t=e.pendingPromotion;return t&&t.to===s?l(t):l(null)}));return function(){return e.unsubscribe()}}),[s]),Object(d.jsx)("div",{className:"board-square",ref:j,children:Object(d.jsx)(E,{black:c,children:i?Object(d.jsx)(w,{promotion:i}):t?Object(d.jsx)(C,{piece:t,position:s}):null})})},M=c.p+"static/media/chess.db2f5ba9.mp3";var D=function(e){var t=e.board,c=e.turn,s=(e.boxRef,e.soundsVolume),n=a.a.useState([]),o=Object(r.a)(n,2),i=o[0],l=o[1],j=Object(u.a)(M,{volume:s/100}),m=Object(r.a)(j,1)[0];function b(e){return{x:"w"===c?e%8:Math.abs(e%8-7),y:"w"===c?Math.abs(Math.floor(e/8)-7):Math.floor(e/8)}}function h(e){var t=b(e);return(t.x+t.y)%2===1}function O(e){var t=b(e),c=t.x,s=t.y;return"".concat(["a","b","c","d","e","f","g","h"][c]).concat(s+1)}return a.a.useEffect((function(){l("w"===c?t.flat():t.flat().reverse()),m(),console.log(s)}),[c]),Object(d.jsx)("div",{className:"board",children:i.map((function(e,t){return Object(d.jsx)("div",{className:"square",children:Object(d.jsx)(G,{piece:e,black:h(t),position:O(t)})},t)}))})};var q=function(e){var t=e.turn,c=a.a.useState(0),n=Object(r.a)(c,2),o=n[0],i=n[1],u=a.a.useState([]),j=Object(r.a)(u,2),m=j[0],b=j[1],h=Object(s.useRef)();return Object(s.useEffect)((function(){l.a.from([h.current],{x:"-800px",duration:1}),console.log("start")}),[]),Object(s.useEffect)((function(){t&&setTimeout((function(){i(JSON.parse(localStorage.getItem("gameStatAllSteps"))),b(JSON.parse(localStorage.getItem("gameStatCurrStep"))),console.log(o),console.log(m),console.log()}),0)}),[t]),Object(d.jsxs)("div",{className:"game-statistics",ref:h,children:[Object(d.jsxs)("div",{className:"game-statistics__steps",children:[Object(d.jsx)("h4",{className:"game-statistics__title",children:"MOVES:"}),o]}),Object(d.jsxs)("div",{className:"game-statistics__game-status",children:[Object(d.jsx)("h4",{children:"GAME STATUS:"}),m&&"".concat(m.map((function(e){return"".concat(e.from,"-").concat(e.to)})))]})]})};var L=function(e){var t=e.history,c=Object(s.useRef)();return Object(d.jsx)("h3",{onClick:function(){l.a.to([c.current],{scale:1.5,duration:1}),setTimeout((function(){t.push("/")}),1e3)},className:"button__get-back",ref:c,children:"Get back"})};var J=function(){return Object(d.jsxs)("div",{class:"footer__developers",children:[Object(d.jsxs)("div",{class:"developer developer__1st",children:["Andrew Murashko",Object(d.jsxs)("div",{class:"developer__links",children:[Object(d.jsx)("a",{class:"ico GitHub-ico developer__1st_GitHub",href:"https://github.com/Andrewmurashko",children:Object(d.jsx)("img",{src:"./assets/Github.svg",alt:"G",className:"piece"})}),Object(d.jsx)("a",{class:"ico telegram-ico developer__1st_telegram",href:"https://t.me/AndrewMurashko",children:Object(d.jsx)("img",{src:"./assets/Telegram.svg",alt:"T",className:"piece"})}),Object(d.jsx)("a",{class:"ico email-ico developer__1st_email",href:"mailto: murashko.kbtem@gmail.com",children:Object(d.jsx)("img",{src:"./assets/email.svg",alt:"E",className:"piece"})})]})]}),Object(d.jsxs)("div",{class:"footer__school-logo-container",children:[Object(d.jsx)("a",{class:"footer__school-logo",href:"https://rs.school/js/",children:Object(d.jsx)("img",{src:"./assets/logo-rsschool.svg",alt:"E",className:"piece"})}),"React 2021-Q1"]})]})},W=c(60),B=(c(73),c.p+"static/media/Vechnye_Hity-Louis_Armstrong_-_Wonderful_World_(MUSIC-LORD.COM).ab412a65.mp3");var U=function(e){var t=e.history,c=a.a.useState([]),n=Object(r.a)(c,2),o=n[0],i=n[1],u=a.a.useState(),j=Object(r.a)(u,2),b=j[0],O=j[1],p=a.a.useState(),g=Object(r.a)(p,2),v=g[0],S=g[1],k=a.a.useState(),E=Object(r.a)(k,2),T=E[0],R=E[1],C=a.a.useState([]),I=Object(r.a)(C,2),A=I[0],w=I[1],G=a.a.useState(1),M=Object(r.a)(G,2),J=M[0],U=M[1],P=Object(s.useRef)(),V=Object(s.useRef)(),H=Object(s.useRef)(),F=Object(s.useRef)();return Object(s.useEffect)((function(){b&&(l.a.from([H.current],{x:"-800px",duration:1}),l.a.from([F.current],{x:"800px",duration:1})),console.log("gameover")}),[v]),Object(s.useEffect)((function(){l.a.from([P.current],{y:"-800px",duration:1}),l.a.from([V.current],{y:"800px",duration:1}),console.log("start")}),[]),Object(m.a)(["Escape","Backspace"],(function(){console.log("Some action"),t.push("/")})),a.a.useEffect((function(){localStorage.getItem("savedGame")?(f.load(localStorage.getItem("savedGame")),N()):(f.reset(),N(),_=0,x.splice(0,x.length));var e=y.subscribe((function(e){i(e.board),O(e.isGameOver),S(e.result),R(e.turn),localStorage.getItem("Records")&&(w(JSON.parse(localStorage.getItem("Records"))),console.log(A))}));return function(){return e.unsubscribe()}}),[v,b]),a.a.useEffect((function(){v&&(console.log(_),w([].concat(Object(h.a)(A),[{steps:_,stepsArr:x,result:v}])),localStorage.setItem("Records",JSON.stringify([].concat(Object(h.a)(A),[{steps:_,stepsArr:x,result:v}]))),console.log([].concat(Object(h.a)(A),[{steps:_,stepsArr:x,result:v}])))}),[v]),Object(d.jsx)("div",{className:"Game",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{className:"settings",ref:P,children:[Object(d.jsx)(L,{history:t}),Object(d.jsxs)("div",{className:"settings__chess-sound",children:[Object(d.jsx)("h3",{className:"settings__chess-sound_title",children:"Chess sounds"}),Object(d.jsx)("input",{onChange:function(e){U(e.target.value),console.log(e.target.value)},id:"soundsRange",type:"range",min:"0",max:"100"})]}),Object(d.jsx)("div",{className:"player",children:Object(d.jsx)(W.a,{autoPlay:!0,src:B,onPlay:function(e){return console.log("onPlay")}})})]}),Object(d.jsx)(q,{steps:_,stepsArr:x,turn:T}),console.log(_),Object(d.jsxs)("div",{className:"game-container",ref:V,children:[b&&Object(d.jsxs)("h2",{className:"vertical-text",ref:H,children:[Object(d.jsx)("button",{onClick:function(){l.a.to([H.current],{x:"-800px",duration:1}),l.a.to([F.current],{x:"800px",duration:1}),setTimeout((function(){return f.reset(),N(),_=0,void x.splice(0,x.length)}),1e3)},children:Object(d.jsx)("span",{className:"vertical-text",children:"NEW GAME"})}),"GAME OVER"]}),Object(d.jsx)("div",{className:"board-container",children:Object(d.jsx)(D,{board:o,turn:T,soundsVolume:J})}),v&&Object(d.jsx)("p",{className:"vertical-text",ref:F,children:v})]})]})})};var P=Object(i.e)((function(e){var t=e.history,c=e.setIsDarkTheme,s=e.isDarkTheme,n=a.a.useState(!0),o=Object(r.a)(n,2),i=o[0],l=o[1],u=a.a.useState(!0),j=Object(r.a)(u,2),b=j[0],h=j[1];Object(m.a)(["Escape","Backspace"],(function(){console.log("Some action"),t.push("/")}));var O=function(){localStorage.setItem("Settings",JSON.stringify({isDarkTheme:s,movesRule:i,repititionRule:b}))},p=function(){console.log("checked"),c(!s),console.log(c),O()},f=function(){l(!i),O()},g=function(){h(!b),O()};return Object(d.jsxs)("div",{className:"settings-menu",children:[Object(d.jsx)("h2",{className:"title settings-menu-title",children:"Settings"}),Object(d.jsxs)("div",{className:"settings-menu__items",children:[Object(d.jsxs)("div",{className:"settings-menu__item",children:["Theme: ",Object(d.jsx)("input",{className:"settings-menu__input",type:"radio",onChange:p,checked:s?"checked":"",onClick:p,volue:"on"}),"Dark ",Object(d.jsx)("input",{className:"settings-menu__input",type:"radio",onChange:p,checked:s?"":"checked",onClick:p,volue:"off"}),"Blue "]}),Object(d.jsxs)("div",{className:"settings-menu__item",children:["50 moves rule: ",Object(d.jsx)("input",{className:"settings-menu__input",type:"radio",onChange:f,checked:i?"checked":"",onClick:f,volue:"on"}),"on ",Object(d.jsx)("input",{className:"settings-menu__input",type:"radio",onChange:f,checked:i?"":"checked",onClick:f,volue:"off"}),"off "]}),Object(d.jsxs)("div",{className:"settings-menu__item",children:["Repetition rule: ",Object(d.jsx)("input",{className:"settings-menu__input",type:"radio",onChange:g,checked:b?"checked":"",onClick:g,volue:"on"}),"on ",Object(d.jsx)("input",{className:"settings-menu__input",type:"radio",onChange:g,checked:b?"":"checked",onClick:g,volue:"off"}),"off "]})]}),Object(d.jsx)(L,{history:t})]})}));var V=function(e){var t=e.history;return Object(m.a)(["Escape","Backspace"],(function(){console.log("Some action"),t.push("/")})),Object(d.jsxs)("div",{className:"tutorial",children:[Object(d.jsx)("h2",{className:"tutorial__title",children:"Tutorial"}),Object(d.jsxs)("div",{className:"tutorial__subtiitle_hotkeys",children:[Object(d.jsxs)("div",{className:"menu-hotkeys",children:[Object(d.jsx)("h3",{className:"title-hotkeys",children:"\u0425\u043e\u0442\u043a\u0435\u0438 \u043c\u0435\u043d\u044e:"}),Object(d.jsx)("div",{children:'\u0441\u0442\u0440\u0435\u043b\u043a\u0438 "\u0432\u0432\u0435\u0440\u0445", "\u0432\u043d\u0438\u0437" - \u0432\u044b\u0431\u043e\u0440 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u043c\u0435\u043d\u044e;'}),Object(d.jsx)("div",{children:'"Enter" - \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0443;'}),Object(d.jsx)("div",{children:'"Esc", "BackSpace" - \u0432\u043e\u0437\u0432\u0440\u0430\u0442 \u0432 \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e '})]}),Object(d.jsxs)("div",{className:"game-hotkeys",children:[Object(d.jsx)("h3",{className:"title-hotkeys",children:"\u0425\u043e\u0442\u043a\u0435\u0438 \u0432 \u0438\u0433\u0440\u0435:"}),Object(d.jsx)("div",{children:'\u0441\u0442\u0440\u0435\u043b\u043a\u0438 "\u0432\u0432\u0435\u0440\u0445", "\u0432\u043d\u0438\u0437" - \u0432\u044b\u0431\u043e\u0440 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u043c\u0435\u043d\u044e;'}),Object(d.jsx)("div",{children:'"Enter" - \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0443;'}),Object(d.jsx)("div",{children:'"Esc", "BackSpace" - \u0432\u043e\u0437\u0432\u0440\u0430\u0442 \u0432 \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e '})]}),Object(d.jsxs)("div",{className:"player-hotkeys",children:[Object(d.jsx)("h3",{className:"title-hotkeys",children:"\u0425\u043e\u0442\u043a\u0435\u0438 \u043f\u043b\u0435\u0435\u0440\u0430:"}),Object(d.jsx)("div",{children:"\u043a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043f\u043e \u043f\u043b\u0435\u0435\u0440\u0443, \u0447\u0442\u043e\u0431\u044b \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0445\u043e\u0442\u043a\u0435\u0438"}),Object(d.jsx)("div",{children:'\u0441\u0442\u0440\u0435\u043b\u043a\u0438 "\u0432\u0432\u0435\u0440\u0445", "\u0432\u043d\u0438\u0437" - \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u043e\u0432\u043a\u0430 \u0433\u0440\u043e\u043c\u043a\u043e\u0441\u0442\u0438;'}),Object(d.jsx)("div",{children:'\u0441\u0442\u0440\u0435\u043b\u043a\u0438 "\u0432\u043b\u0435\u0432\u043e", "\u0432\u043f\u0440\u0430\u0432\u043e" - \u043f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0430 \u0442\u0440\u0435\u043a\u0430;'}),Object(d.jsx)("div",{children:'"Space" - \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u043f\u0430\u0443\u0437\u0443/\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u043b\u0435\u0435\u0440'})]})]}),Object(d.jsx)(L,{history:t})]})},H=c(38);var F=function(e){var t=e.history,c=a.a.useState(JSON.parse(localStorage.getItem("Records"))||[]),s=Object(r.a)(c,2),n=s[0];return s[1],a.a.useEffect((function(){console.log(n)}),[]),Object(m.a)(["Escape","Backspace"],(function(){console.log("Some action"),t.push("/")})),Object(d.jsxs)("div",{className:"records",children:[Object(d.jsx)("h2",{className:" title records__title",children:"Records"}),Object(d.jsxs)("div",{className:"records__items",children:[console.log(n),n.length&&n.sort((function(e,t){return e.steps-t.steps})).map((function(e,t){return Object(d.jsxs)("div",{className:"records__item",children:[Object(d.jsx)("h4",{children:"Moves: ".concat(e.steps)}),Object(d.jsx)("h4",{children:"Transcript: ".concat(e.stepsArr.map((function(e){return"".concat(e.from,"-").concat(e.to)})))}),Object(d.jsx)("h4",{children:"".concat(e.result)})]},t)}))]}),Object(d.jsx)(L,{history:t})]})};var K=function(){var e=a.a.useState(!0),t=Object(r.a)(e,2),c=t[0],s=t[1];return a.a.useEffect((function(){}),[c]),Object(d.jsxs)("div",{className:c?"theme_dark wrapper":"theme_colored wrapper",children:[Object(d.jsx)(i.a,{exact:!0,path:"/",component:b}),Object(d.jsx)(i.a,{exact:!0,path:"/Game",component:U}),Object(d.jsx)(i.a,{exact:!0,path:"/Settings",component:function(){return Object(d.jsx)(P,{setIsDarkTheme:s,isDarkTheme:c})}}),Object(d.jsx)(i.a,{exact:!0,path:"/Tutorial",component:V}),Object(d.jsx)(i.a,{exact:!0,path:"/Records",component:F}),Object(d.jsx)("div",{className:"footer__wrapper",children:Object(d.jsx)(J,{})})]})},X=c(18),Q=c(25),Y={isGame:!1,currentWord:{},wrongWords:[],lives:5},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_WORD"===t.type?Object(Q.a)(Object(Q.a)({},e),{},{currentWord:t.payload}):"SET_CATEGORY"===t.type?Object(Q.a)(Object(Q.a)({},e),{},{category:t.payload}):e},Z=Object(X.c)({stateGame:z}),$=c(58),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||X.d,te=Object(X.e)(Z,ee(Object(X.a)($.a))),ce=c(29),se=c(87),ae=c(59);o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(ce.a,{children:Object(d.jsx)(H.a,{store:te,children:Object(d.jsx)(se.a,{backend:ae.a,children:Object(d.jsx)(K,{})})})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.cbe90213.chunk.js.map